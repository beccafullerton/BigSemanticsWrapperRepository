<meta_metadata_repository name="fbSocialMediaProfile"
  package="ecologylab.bigsemantics.generated.library.creativeWork">

  <meta_metadata name="fbSocialMediaProfile" extends="blog" parser="xpath" no_cache="true">
	    <selector url_regex="https://www.facebook.com/[^/?]*" domain="facebook.com" />
	    <selector url_regex="https://www.facebook.com/[^/?]*[?fref=tl_fr_box]*" domain="facebook.com" />
	     
	    <scalar name="title" label="title">
	      <xpath>//span[@id='fb-timeline-cover-name']</xpath>
	    </scalar>
	    
	    <scalar name="description"/>
		
		<scalar name="username" scalar_type="String">
	      <xpath>//span[@id='fb-timeline-cover-name']</xpath>
	      <xpath>//span[@id='fb-timeline-cover-name']/..</xpath>
    	</scalar>
    	
    	<composite name="coverPhoto" type="image">
    		<xpath>//img[@class='coverPhotoImg photo img']</xpath>
    		<scalar name="location">
            	<xpath>./@src</xpath>
         	</scalar>
    	</composite>
    	
		<collection label="user" name="facebook" child_type="facebook">
		  <xpath>.</xpath>
			<composite name="photo">
		        <xpath>//a[@class='profilePicThumb']/img</xpath>
		        <xpath>//img[@class='profilePic img']</xpath>
		        <scalar name="location" >
		          <xpath>./@src</xpath>
		        </scalar>
	        </composite>
	        <scalar name="description"/>
	  	 	<scalar name="city">
	        	<xpath>//div[@class='_50f3']//text()[contains(.,'Lives in') or contains(.,'lives in')]/../a</xpath>
	      	</scalar>
     	   <scalar name="worked" >
     	   		<xpath>//div[@class='_50f3']//text()[contains(.,'Worked at')]/../a</xpath>
     	   </scalar>
	       <scalar name="studied" >
	       		<xpath>//div[@class='_50f3']//text()[contains(.,'Studie')]/../a</xpath>
	       </scalar>
	       <collection name="friend_stats" child_scalar_type="String">
	       		<xpath>//div[@class='_70l _2i-0']//text()[contains(.,'Friends')]/../../../span[@class='_71u']/a</xpath>
	       		<xpath>//div[@class='_70l _2i-0']//text()[contains(.,'Friends')]/../../../span[@class='_71u']/span/a</xpath>
	       </collection>
	       <scalar name="birth_date">
	       		<xpath>//div[@class='_50f3']//text()[contains(.,'Born on')]/..</xpath>
	       </scalar>
	       <scalar name="birth_place">
	       		<xpath>//div[@class='_50f3']//text()[contains(.,'From')]/../a</xpath>
	       		<xpath>//div[@class='_50f3']//text()[contains(.,'from')]/..</xpath>
	       </scalar>
		</collection>
		
		<collection name="feed" child_type="socailMediaPost"  comment="mainFeed">
			<xpath>//div[@class='userContentWrapper _5pcr']</xpath>
			<scalar name="title" scalar_type="String"/>
			<collection name="authors" child_type="author">
				<xpath>.//div[@class='_1dwg']//div[@class='clearfix _5x46']</xpath>
    			<scalar name="title" >
    				<xpath>.//span[@class='fwn fcg']//span[contains(@class,'fwb')]/a</xpath>
    			</scalar>
    			<scalar name="location" >
    				<xpath>.//span[@class='fwn fcg']//span[contains(@class,'fwb')]/a</xpath>
    			</scalar>
    			<composite name="photo">
    				<xpath>.//img</xpath>
    				<scalar name="location">
		            <xpath>./@src</xpath>
		          </scalar>
    			</composite>
			</collection>
			<scalar name="date"> <!-- need to figure how to seperate date 'at' time -->
				<xpath>.//div[@class='_1dwg']//div[@class='clearfix _5x46']//div[@class='_5pcp']//a[@class='_5pcq']//abbr</xpath>
			</scalar>
			
			<collection name="photos" >
			<xpath>.//div[@class='_3x-2']//img</xpath>
    			   <scalar name="location">
		            <xpath>./@src</xpath>
		          </scalar>
			</collection>
			<collection name="description_content" child_scalar_type="String">
				<xpath>.//div[@class='_5pbx userContent']//p</xpath>
			</collection>
			<collection name="up_votes" label="likes" child_scalar_type="String">
				<xpath>.//a[@class='UFIBlingBox uiBlingBox feedbackBling UFIBlingBoxRevised']//span[contains(.,'Likes')]</xpath>
				<xpath>.//div[@class='UFILikeSentenceText']/span</xpath>
			</collection>
			<scalar name="shares">
				<xpath>.//a[@class='UFIBlingBox uiBlingBox feedbackBling UFIBlingBoxRevised']//span[contains(.,'Shares')]</xpath>
			</scalar>
			<scalar name="num_comments">
				<xpath>.//a[@class='UFIBlingBox uiBlingBox feedbackBling UFIBlingBoxRevised']//span[contains(.,'Comments')]</xpath>
			</scalar>
			
			<collection name="comments">
				<xpath>.//div[@class='uiUfi UFIContainer _5pc9 _5vsj _5v9k']//li[contains(@class,'UFIFirstComment ')]/../..//ul[not(contains(@class, 'UFIReplyList'))]/li[contains(@class, 'Comment')]</xpath>
					<collection name="authors" child_type="author">
						<xpath>.//div[@class='clearfix']</xpath>
		    			<scalar name="title" >
		    				<xpath>.//div[@class='UFICommentContentBlock']//a[@class=' UFICommentActorName']/span</xpath>
		    			</scalar>
		    			<scalar name="location" >
		    				<xpath>.//div[@class='UFICommentContentBlock']//a[@class=' UFICommentActorName']</xpath>
		    			</scalar>
		    			<composite name="photo">
		    				<xpath>.//div[@class='_ohe lfloat']//img[contains(@class,'img UFIActorImage')]</xpath>
		    				<scalar name="location">
				            	<xpath>./@src</xpath>
				          </scalar>
		    			</composite>
					</collection>
				<collection name="description_content" child_scalar_type="String">
					<xpath>.//span[@class='UFICommentBody']//span//text()</xpath>
				</collection>
				<!-- path for stickers but need to figure out how to extract pic url
				/div[@class='UFICommentContent']//div[@data-testid='ufi_comment_sticker']/@style
				  -->
				<collection name="up_votes" label="likes" child_scalar_type="String">
					<xpath>.//div[contains(@class,'UFICommentActions')]//a[@class='UFICommentLikeButton']/span</xpath>
				</collection>
				<scalar name="date"> <!-- need to figure how to seperate date 'at' time -->
					<xpath>.//div[contains(@class,'UFICommentActions')]//abbr[@class='livetimestamp']</xpath>
				</scalar>
				<collection label="replies" name="comments">
					<xpath>./following-sibling::li[1]/ul/li[contains(@class,'UFIComment')]</xpath>
					<collection name="authors" child_type="author">
						<xpath>.//div[@class='clearfix']</xpath>
		    			<scalar name="title" >
		    				<xpath>.//div[@class='UFICommentContentBlock']//a[@class=' UFICommentActorName']/span</xpath>
		    			</scalar>
		    			<composite name="photo">
		    				<xpath>.//div[@class='_ohe lfloat']//img[contains(@class,'img UFIActorImage')]</xpath>
		    				<scalar name="location">
				            	<xpath>./@src</xpath>
				          </scalar>
		    			</composite>
					</collection>
					<collection name="description_content" child_scalar_type="String">
						<xpath>.//span[@class='UFICommentBody']//span//text()</xpath>
					</collection>
					<!-- path for stickers but need to figure out how to extract pic url
					/div[@class='UFICommentContent']//div[@data-testid='ufi_comment_sticker']/@style
					  -->
					<collection name="up_votes" label="likes" child_scalar_type="String">
						<xpath>.//div[contains(@class,'UFICommentActions')]//a[@class='UFICommentLikeButton']/span</xpath>
					</collection>
					<scalar name="date"> <!-- need to figure how to seperate date 'at' time -->
						<xpath>.//div[contains(@class,'UFICommentActions')]//abbr[@class='livetimestamp']</xpath>
					</scalar>
				</collection>
			</collection>
		</collection>
		
	<composite name="Friends" type="socialMediaFeed">
	<xpath>//li[@class='fbTimelineUnit fbTimelineTwoColumn clearfix']//div[@role='article']</xpath>
		<scalar name="name">
			<xpath>.//h3[@class='_71u _70n _5r0_']/a</xpath>
			<scalar name="location">
            	<xpath>./</xpath>
         	</scalar>
		</scalar>
	    <collection name="feed" comment="Friends block">
	    	<xpath>.//ul/li[contains(@class,'friendListing')]</xpath>
	    	<collection name="authors" child_type="author" label="friends">
    			<scalar name="title" >
    				<xpath>./a/div[@class='friendName']/div[@class='name']</xpath>
    			</scalar>
    			<scalar name="location">
    				<xpath>./a</xpath>
    			</scalar>
    			<composite name="photo">
    				<xpath>./a/img[contains(@class, '_s0 friendPhoto _rv img')]</xpath>
    				<scalar name="location">
		            	<xpath>./@src</xpath>
		          </scalar>
    			</composite>
		</collection>
	    </collection>
		
	</composite>
	<collection name="subArticles" child_type="socailMediaPost"  comment="articles">
		<xpath>//li[@class='fbTimelineUnit fbTimelineTwoColumn clearfix']//div[@role='article']</xpath>
		<scalar name="title_content" label="Content Block">
			<xpath>.//h3[@class='_71u _70n _5r0_']/a</xpath>
			<scalar name="location">
            	<xpath>./</xpath>
         	</scalar>
		</scalar>	
		<!-- friends block -->
		<collection name="authors" child_type="author" label="friends">
			<xpath>.//ul/li[contains(@class,'friendListing')]</xpath>
    			<scalar name="title" >
    				<xpath>./a/div[@class='friendName']/div[@class='name']</xpath>
    			</scalar>
    			<scalar name="location">
    				<xpath>./a</xpath>
    			</scalar>
    			<composite name="photo">
    				<xpath>./a/img[contains(@class, '_s0 friendPhoto _rv img')]</xpath>
    				<scalar name="location">
		            	<xpath>./@src</xpath>
		          </scalar>
    			</composite>
		</collection>
		<!-- attempt to catch photos and videos block -->
		<collection name="photos" >
			<xpath>.//table[contains(@class,'uiGrid')]//img</xpath>
    			   <scalar name="location">
		            <xpath>./@src</xpath>
		          </scalar>
		</collection>		
	</collection>
		
		
  </meta_metadata> 
</meta_metadata_repository>